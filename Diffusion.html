<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Diffusion | BioLearn</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link rel="stylesheet" href="style.css">
</head>
<body class="flex text-white relative">
  <div class="bg-overlay"></div>
  <div class="animated-overlay"></div>
  <!-- SIDEBAR NAV -->
  <nav class="w-60 glass min-h-screen p-6 shadow-2xl flex flex-col items-center">
    <div class="mb-8 flex items-center gap-3">
      <i class="fa-solid fa-dna text-cyan-400 text-3xl"></i>
      <span class="text-2xl font-extrabold tracking-wide text-cyan-200">BioLearn</span>
    </div>
    <ul class="space-y-5 text-lg w-full">
      <li class="hover:text-cyan-300 cursor-pointer flex items-center gap-2">
        <i class="fa-solid fa-house"></i> <a href="Index.html">Home</a>
      </li>
      <li class="font-bold">
        <span class="flex items-center gap-2">
          <i class="fa-solid fa-water"></i> <a href="#">Passive Transports</a>
        </span>
        <ul class="ml-6 mt-2 space-y-2">
          <li class="bg-cyan-600 bg-opacity-80 px-2 py-1 rounded flex items-center gap-2 shadow">
            <i class="fa-solid fa-arrow-right-arrow-left"></i> <a href="#">Diffusion</a>
          </li>
          <li class="hover:text-cyan-300 cursor-pointer flex items-center gap-2">
            <i class="fa-solid fa-person-walking-arrow-right"></i> <a href="Facilitated-Diffusion.html">Facilitated Diffusion</a>
          </li>
          <li class="hover:text-cyan-300 cursor-pointer flex items-center gap-2">
            <i class="fa-solid fa-droplet"></i> <a href="Osmosis.html">Osmosis</a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="flex-1 p-10 space-y-16 overflow-y-auto relative">
    <!-- HEADER -->
    <section class="text-center">
      <h1 class="text-5xl font-extrabold text-cyan-300 mb-4 drop-shadow-lg bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent">
        Diffusion in Biology
      </h1>
      <p class="text-xl text-gray-200 italic drop-shadow">
        Movement of particles from high to low concentration
      </p>
    </section>

    <!-- INTERACTIVE DIFFUSION SIMULATION -->
    <section class="flex justify-center items-center min-h-[340px]">
      <div id="diffusion-area" class="relative w-[600px] h-[260px] rounded-2xl bg-gradient-to-r from-cyan-900/80 via-blue-900/80 to-purple-900/80 shadow-2xl border-4 border-cyan-200 overflow-hidden">
        <div class="absolute left-1/2 top-0 bottom-0 w-1 bg-white bg-opacity-40 z-10"></div>
        <span class="absolute left-8 top-2 text-cyan-200 text-sm font-bold">High Concentration</span>
        <span class="absolute right-8 top-2 text-purple-200 text-sm font-bold">Low Concentration</span>
        <button id="add-particle" class="absolute bottom-4 left-1/2 -translate-x-1/2 bg-cyan-500 hover:bg-cyan-400 text-white px-4 py-2 rounded-lg shadow-lg font-semibold transition">
          Add Particle
        </button>
        <span class="absolute bottom-4 right-6 text-xs text-cyan-200 bg-cyan-900/60 px-2 py-1 rounded">Click a particle to speed it up!</span>
      </div>
    </section>

    <!-- TEXT + BUBBLE EFFECT -->
    <section class="relative bg-white bg-opacity-90 p-8 rounded-2xl shadow-2xl max-w-3xl mx-auto text-black overflow-hidden">
      <div class="absolute -top-5 -left-5 bubble" style="animation-delay: 0s;"></div>
      <div class="absolute -top-10 right-10 bubble" style="animation-delay: 2s;"></div>
      <div class="absolute bottom-0 left-1/2 bubble" style="animation-delay: 4s;"></div>
      <div class="absolute top-1/2 right-0 bubble" style="animation-delay: 3s;"></div>
      <div class="absolute bottom-8 left-10 bubble" style="animation-delay: 1.5s;"></div>
      <h2 class="text-2xl font-semibold text-cyan-700 mb-4 flex items-center gap-2">
        <i class="fa-solid fa-arrows-left-right"></i> Try It Yourself!
      </h2>
      <p class="leading-relaxed text-lg">
        Watch how particles move from high to low concentration. Add more particles or click them to see how diffusion works in real time!
      </p>
    </section>

    <!-- MINI INFO CARDS (Interactive) -->
    <section class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
      <div onclick="showEffect(0)" id="card-0" class="group cursor-pointer bg-gradient-to-br from-cyan-500 via-blue-500 to-blue-700 text-white p-6 rounded-xl shadow-xl hover:scale-105 transform transition duration-300 border-2 border-cyan-200/40 relative">
        <h3 class="text-xl font-bold flex items-center gap-2"><i class="fa-solid fa-lungs"></i> Gas Exchange</h3>
        <p class="mt-2">Oxygen diffuses into blood in the lungs.</p>
        <div id="effect-0" class="hidden absolute left-1/2 -translate-x-1/2 top-full mt-3 w-64 bg-white bg-opacity-90 text-cyan-800 rounded-lg shadow-lg p-3 text-center text-base z-10 border border-cyan-300 animate__animated"></div>
      </div>
      <div onclick="showEffect(1)" id="card-1" class="group cursor-pointer bg-gradient-to-br from-green-400 via-green-500 to-teal-600 text-white p-6 rounded-xl shadow-xl hover:scale-105 transform transition duration-300 border-2 border-green-200/40 relative">
        <h3 class="text-xl font-bold flex items-center gap-2"><i class="fa-solid fa-dna"></i> Cells</h3>
        <p class="mt-2">Waste products diffuse out of cells easily.</p>
        <div id="effect-1" class="hidden absolute left-1/2 -translate-x-1/2 top-full mt-3 w-64 bg-white bg-opacity-90 text-green-800 rounded-lg shadow-lg p-3 text-center text-base z-10 border border-green-300 animate__animated"></div>
      </div>
      <div onclick="showEffect(2)" id="card-2" class="group cursor-pointer bg-gradient-to-br from-purple-500 via-fuchsia-500 to-pink-500 text-white p-6 rounded-xl shadow-xl hover:scale-105 transform transition duration-300 border-2 border-purple-200/40 relative">
        <h3 class="text-xl font-bold flex items-center gap-2"><i class="fa-solid fa-bolt"></i> No Energy</h3>
        <p class="mt-2">Diffusion is a passive process‚Äîit uses no ATP.</p>
        <div id="effect-2" class="hidden absolute left-1/2 -translate-x-1/2 top-full mt-3 w-64 bg-white bg-opacity-90 text-fuchsia-800 rounded-lg shadow-lg p-3 text-center text-base z-10 border border-fuchsia-300 animate__animated"></div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="text-center text-sm text-gray-200 mt-20 py-4 bg-gradient-to-r from-cyan-900/60 to-blue-900/60 rounded-xl shadow-lg flex flex-col items-center gap-2">
      <span>
        <i class="fa-solid fa-leaf text-green-400"></i>
        &copy; 2025 Biology Explorer | All Rights Reserved
      </span>
      <span class="text-xs text-cyan-200">Designed with <i class="fa-solid fa-heart text-pink-400"></i> for learning</span>

      <div id="footer-reaction" class="mt-2 text-lg font-bold text-cyan-300 h-6"></div>
    </footer>
  </main>

  <script>
    const area = document.getElementById('diffusion-area');
    const addBtn = document.getElementById('add-particle');
    let particles = [];
    let countDiffused = 0;
    const midX = 300;

    const counterDisplay = document.createElement('div');
    counterDisplay.className = "absolute top-2 left-1/2 transform -translate-x-1/2 text-xs text-white bg-blue-900/70 px-3 py-1 rounded shadow";
    counterDisplay.id = "diff-counter";
    counterDisplay.textContent = `Diffused: 0`;
    area.appendChild(counterDisplay);

    function createParticle() {
      return {
        x: Math.random() * 120 + 40,
        y: Math.random() * 180 + 30,
        vx: Math.random() * 1.2 + 0.5,
        vy: (Math.random() - 0.5) * 1.2,
        color: 'bg-cyan-300',
        id: Math.random().toString(36).substr(2, 9),
        speedup: false,
        crossed: false
      };
    }

    function resetParticles() {
      particles = [];
      countDiffused = 0;
      document.getElementById("diff-counter").textContent = "Diffused: 0";
    }

    for (let i = 0; i < 24; i++) particles.push(createParticle());

    function renderParticles() {
      area.querySelectorAll('.particle').forEach(e => e.remove());

      for (let p of particles) {
        // Move logic
        if (p.speedup) {
          p.x += p.vx * 2.5;
          p.y += p.vy * 2.5;
        } else {
          p.x += p.vx;
          p.y += p.vy;
        }

        if (p.y < 16 || p.y > 244) p.vy *= -1;
        if (p.x < midX - 10) p.vx += Math.random() * 0.05;
        p.vx += (Math.random() - 0.5) * 0.04;
        p.vy += (Math.random() - 0.5) * 0.04;
        p.x = Math.max(16, Math.min(584, p.x));
        p.y = Math.max(16, Math.min(244, p.y));

        // Create element
        const el = document.createElement('div');
        el.className = `particle absolute rounded-full shadow-lg transition-all duration-200 cursor-pointer ${p.color}`;
        el.style.width = '18px';
        el.style.height = '18px';
        el.style.left = `${p.x - 9}px`;
        el.style.top = `${p.y - 9}px`;
        el.style.opacity = p.speedup ? '1' : '0.85';
        el.style.boxShadow = `0 0 16px 2px ${p.color === 'bg-cyan-300' ? '#67e8f9' : '#e9d5ff'}`;
        el.title = "Click to speed up!";
        el.onclick = () => {
          p.speedup = true;
          setTimeout(() => { p.speedup = false; }, 600);
          playSound('click');
        };

        // Track crossing
        if (!p.crossed && p.x > midX) {
          p.crossed = true;
          p.color = 'bg-purple-300';
          countDiffused++;
          document.getElementById("diff-counter").textContent = `Diffused: ${countDiffused}`;
          el.classList.add("animate-bounce");
        }

        area.appendChild(el);
      }

      requestAnimationFrame(renderParticles);
    }

    addBtn.onclick = () => {
      particles.push(createParticle());
    };

    renderParticles();

    // Reset Button
    const resetBtn = document.createElement('button');
    resetBtn.textContent = 'Reset Particles';
    resetBtn.className = "absolute top-2 right-4 bg-red-500 hover:bg-red-400 text-white px-3 py-1 rounded text-xs shadow";
    resetBtn.onclick = () => resetParticles();
    area.appendChild(resetBtn);

    // Sound effects
    const sounds = {
      click: new Audio('https://cdn.pixabay.com/download/audio/2023/03/06/audio_faa2789ce7.mp3?filename=click-124467.mp3'),
      emoji: new Audio('https://cdn.pixabay.com/download/audio/2022/08/10/audio_d943d8c31e.mp3?filename=success-1-6297.mp3')
    };

    function playSound(type) {
      if (type in sounds) {
        sounds[type].currentTime = 0;
        sounds[type].play();
      }
    }

    // Emoji interaction w/ sound
    function footerReact(emoji) {
      const el = document.getElementById('footer-reaction');
      el.textContent = `You reacted: ${emoji}`;
      el.classList.add('animate-bounce');
      setTimeout(() => el.classList.remove('animate-bounce'), 800);
      playSound('emoji');
    }

    window.footerReact = footerReact;

    // Info card hover tip
    document.querySelectorAll('.group').forEach((card, idx) => {
      card.addEventListener('mouseenter', () => {
        card.classList.add('scale-105', 'ring-2', 'ring-white/40');
      });
      card.addEventListener('mouseleave', () => {
        card.classList.remove('scale-105', 'ring-2', 'ring-white/40');
      });
    });

    // Fun facts for each card
    const facts = [
      "üå¨Ô∏è Fun Fact: Each breath you take exchanges about 300 million tiny air sacs in your lungs!",
      "üß¨ Fun Fact: Human bodies have about 37 trillion cells, all using diffusion to survive.",
      "‚ö° Fun Fact: Diffusion needs no energy‚Äîit's nature's way of balancing things out!"
    ];

    function showEffect(idx) {
      // Remove effects from all cards
      for (let i = 0; i < 3; i++) {
        document.getElementById('effect-' + i).classList.add('hidden');
        document.getElementById('card-' + i).classList.remove('ring-4', 'ring-yellow-300', 'animate-bounce');
      }
      // Add effect to clicked card
      const card = document.getElementById('card-' + idx);
      const effect = document.getElementById('effect-' + idx);
      effect.textContent = facts[idx];
      effect.classList.remove('hidden');
      card.classList.add('ring-4', 'ring-yellow-300', 'animate-bounce');
      // Remove animation after 1s
      setTimeout(() => {
        card.classList.remove('ring-4', 'ring-yellow-300', 'animate-bounce');
      }, 1000);
    }
  </script>
</body>
</html>
